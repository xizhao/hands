<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/hands.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hands</title>
    <style>
      /* Default theme variables - matches theme.ts THEMES.light and THEMES.dark */
      :root {
        --background: 0 0% 100%;
        --foreground: 220 9% 12%;
      }
      .dark {
        --background: 224 10% 10%;
        --foreground: 210 20% 98%;
      }
      html, body, #root {
        background: hsl(var(--background));
        color: hsl(var(--foreground));
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <!-- Initialize theme synchronously before React to prevent flash -->
    <script>
      (function() {
        try {
          // Try to read cached theme colors (set by theme.ts on every theme change)
          var colors = localStorage.getItem('hands-theme-colors');
          if (colors) {
            var parsed = JSON.parse(colors);
            // Apply dark class
            if (parsed.isDark) {
              document.documentElement.classList.add('dark');
            }
            // Apply all CSS variables
            if (parsed.vars) {
              var root = document.documentElement;
              for (var varName in parsed.vars) {
                root.style.setProperty(varName, parsed.vars[varName]);
              }
            }
            return; // Done - full theme applied
          }
          // Fallback: no cached colors yet, just use dark/light based on theme name
          var stored = localStorage.getItem('hands-theme');
          var themeName = 'system';
          if (stored) {
            var themeData = JSON.parse(stored);
            themeName = (themeData.state && themeData.state.currentTheme) || 'system';
          }
          var isDark = themeName === 'system'
            ? window.matchMedia('(prefers-color-scheme: dark)').matches
            : themeName !== 'light' && themeName !== 'light-mode' && themeName !== 'github-light';
          if (isDark) {
            document.documentElement.classList.add('dark');
          }
        } catch (e) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
  </head>
  <body>
    <div id="root">
      <!-- Initial loading state - HandsLogo shown before React mounts -->
      <div style="height: 100vh; display: flex; align-items: center; justify-content: center;">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.3; animation: pulse 2s ease-in-out infinite;">
          <path d="M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2" />
          <path d="M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2" />
          <path d="M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8" />
          <path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15" />
        </svg>
        <style>@keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.6; } }</style>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    <div id="portal" style="position: fixed; left: 0; top: 0; z-index: 9999;"></div>
  </body>
</html>
