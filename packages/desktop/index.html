<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/hands.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hands</title>
    <style>
      /* Default theme variables - matches theme.ts THEMES.light and THEMES.dark */
      :root {
        --background: 0 0% 100%;
        --foreground: 220 9% 12%;
      }
      .dark {
        --background: 224 10% 10%;
        --foreground: 210 20% 98%;
      }
      html, body, #root {
        background: hsl(var(--background));
        color: hsl(var(--foreground));
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <!-- Initialize theme synchronously before React to prevent flash -->
    <script>
      (function() {
        try {
          // Try to read cached theme colors (set by theme.ts on every theme change)
          var colors = localStorage.getItem('hands-theme-colors');
          if (colors) {
            var parsed = JSON.parse(colors);
            // Apply dark class
            if (parsed.isDark) {
              document.documentElement.classList.add('dark');
            }
            // Apply all CSS variables
            if (parsed.vars) {
              var root = document.documentElement;
              for (var varName in parsed.vars) {
                root.style.setProperty(varName, parsed.vars[varName]);
              }
            }
            return; // Done - full theme applied
          }
          // Fallback: no cached colors yet, just use dark/light based on theme name
          var stored = localStorage.getItem('hands-theme');
          var themeName = 'system';
          if (stored) {
            var themeData = JSON.parse(stored);
            themeName = (themeData.state && themeData.state.currentTheme) || 'system';
          }
          var isDark = themeName === 'system'
            ? window.matchMedia('(prefers-color-scheme: dark)').matches
            : themeName !== 'light' && themeName !== 'light-mode' && themeName !== 'github-light';
          if (isDark) {
            document.documentElement.classList.add('dark');
          }
        } catch (e) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
  </head>
  <body>
    <div id="root">
      <!-- Initial loading state - shown before React mounts, replaced automatically -->
      <div style="height: 100vh; display: flex; align-items: center; justify-content: center;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style="width: 48px; height: 48px; opacity: 0.15;">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#A855F7;stop-opacity:1" />
            </linearGradient>
          </defs>
          <circle cx="50" cy="50" r="45" fill="url(#grad)"/>
          <path d="M30 55 L45 40 L55 50 L70 35" stroke="white" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="70" cy="35" r="5" fill="white"/>
          <path d="M30 65 L50 65 L50 70 L30 70 Z" fill="white" opacity="0.7"/>
          <path d="M55 65 L75 65 L75 70 L55 70 Z" fill="white" opacity="0.5"/>
        </svg>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    <div id="portal" style="position: fixed; left: 0; top: 0; z-index: 9999;"></div>
  </body>
</html>
