---
title: Configuration
description: Configure your Hands workbook with defineConfig
---

The `defineConfig` function defines your workbook's configuration.

## Basic usage

```typescript
// hands.config.ts
import { defineConfig } from '@hands/stdlib';

export default defineConfig({
  name: 'my-workbook'
});
```

## Configuration options

### name

Your workbook name:

```typescript
{
  name: 'sales-dashboard'
}
```

### database

Database configuration:

```typescript
// Embedded (default)
{
  database: {
    type: 'embedded'
  }
}

// Cloudflare D1
{
  database: {
    type: 'd1',
    name: 'my-database',
    id: 'xxx-xxx-xxx'
  }
}

// External PostgreSQL
{
  database: {
    type: 'postgres',
    connectionString: process.env.DATABASE_URL
  }
}
```

### vars

Environment variables:

```typescript
{
  vars: {
    API_URL: 'https://api.example.com',
    FEATURE_FLAG: 'true'
  }
}
```

### triggers

Scheduled job configuration:

```typescript
{
  triggers: {
    scheduled: [
      { cron: '0 9 * * *', handler: './src/jobs/daily.ts' },
      { cron: '*/5 * * * *', handler: './src/jobs/sync.ts' }
    ]
  }
}
```

### deploy

Deployment settings:

```typescript
{
  deploy: {
    name: 'my-production-app',
    routes: ['example.com/*'],
    compatibilityDate: '2024-01-01'
  }
}
```

## Complete example

```typescript
import { defineConfig } from '@hands/stdlib';

export default defineConfig({
  name: 'e-commerce-analytics',

  database: {
    type: 'embedded'
  },

  vars: {
    PUBLIC_URL: 'https://analytics.example.com',
    MAX_RESULTS: '100'
  },

  triggers: {
    scheduled: [
      {
        cron: '0 1 * * *',
        handler: './src/jobs/daily-aggregate.ts'
      },
      {
        cron: '*/15 * * * *',
        handler: './src/jobs/sync-orders.ts'
      },
      {
        cron: '0 9 * * 1',
        handler: './src/jobs/weekly-report.ts'
      }
    ]
  },

  deploy: {
    name: 'analytics-prod',
    routes: ['analytics.example.com/*'],
    compatibilityDate: '2024-01-01'
  }
});
```

## Environment-specific config

Use environment variables for different environments:

```typescript
import { defineConfig } from '@hands/stdlib';

const isDev = process.env.NODE_ENV === 'development';
const isProd = process.env.NODE_ENV === 'production';

export default defineConfig({
  name: isDev ? 'my-app-dev' : 'my-app',

  database: isDev ? {
    type: 'embedded'
  } : {
    type: 'd1',
    name: 'production-db',
    id: process.env.D1_DATABASE_ID
  },

  vars: {
    API_URL: isDev
      ? 'http://localhost:3000'
      : 'https://api.example.com',
    DEBUG: isDev ? 'true' : 'false'
  },

  deploy: isProd ? {
    name: 'my-app',
    routes: ['app.example.com/*']
  } : undefined
});
```

## Scheduled jobs

### Cron expressions

```typescript
{
  triggers: {
    scheduled: [
      // Every minute
      { cron: '* * * * *', handler: './src/jobs/every-minute.ts' },

      // Every 5 minutes
      { cron: '*/5 * * * *', handler: './src/jobs/five-min.ts' },

      // Every hour at minute 0
      { cron: '0 * * * *', handler: './src/jobs/hourly.ts' },

      // Daily at 9 AM UTC
      { cron: '0 9 * * *', handler: './src/jobs/daily.ts' },

      // Weekly on Monday at 9 AM
      { cron: '0 9 * * 1', handler: './src/jobs/weekly.ts' },

      // Monthly on the 1st at midnight
      { cron: '0 0 1 * *', handler: './src/jobs/monthly.ts' }
    ]
  }
}
```

### Rate expressions

Alternative to cron:

```typescript
{
  triggers: {
    scheduled: [
      { rate: '5 minutes', handler: './src/jobs/sync.ts' },
      { rate: '1 hour', handler: './src/jobs/hourly.ts' },
      { rate: '1 day', handler: './src/jobs/daily.ts' }
    ]
  }
}
```

## Type safety

The config is fully typed:

```typescript
import { defineConfig, type Config } from '@hands/stdlib';

// Full type inference
const config = defineConfig({
  name: 'my-app',
  triggers: {
    scheduled: [
      { cron: '0 * * * *', handler: './src/jobs/hourly.ts' }
    ]
  }
});

// Type checking catches errors
defineConfig({
  name: 'my-app',
  triggers: {
    scheduled: [
      { cron: 'invalid', handler: './src/jobs/test.ts' }  // Type error
    ]
  }
});
```

## Reference

### defineConfig(config)

Create a typed configuration.

```typescript
defineConfig({
  name: string,

  database?: {
    type: 'embedded' | 'd1' | 'postgres',
    // For D1
    name?: string,
    id?: string,
    // For postgres
    connectionString?: string
  },

  vars?: Record<string, string>,

  triggers?: {
    scheduled?: Array<{
      cron?: string,
      rate?: string,
      handler: string
    }>
  },

  deploy?: {
    name?: string,
    routes?: string[],
    compatibilityDate?: string,
    outDir?: string
  }
})
```
